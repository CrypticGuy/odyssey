jQuery(document).ready(function(n){function e(n){n.length>0&&setTimeout(function(){n.addClass("bg-loaded"),e(n.next())},150)}function i(n,e,s,a){0==s&&function(){f.length=0;for(var n=0;n<u;n++)f.push(n)}(),-1!=e&&0==s&&(s=1);var o=t();o==e&&(o=t()),s<u-1?(n.eq(o).toggleClass("slide-out",a),setTimeout(function(){i(n,e,s+1,a)},150)):s==u-1&&n.eq(o).toggleClass("slide-out",a).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){-1!=e?(d.children("li.selected").addClass("content-visible"),n.eq(e).addClass("slide-out").removeClass("selected")):c.hasClass("nav-visible")&&a&&c.addClass("nav-clickable"),n.eq(o).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),v=!1})}function t(){var n=Math.floor(Math.random()*f.length),e=f[n];return f.splice(n,1),e}var s=n(".cd-projects-container"),a=s.find(".cd-projects-previews"),o=a.children("li"),d=s.find(".cd-projects"),l=n(".cd-nav-trigger"),c=n(".cd-primary-nav"),r=n(".no-csstransitions").length>0,v=!1,u=d.find("li").length,f=[];a.on("click","a",function(e){e.preventDefault(),0==v&&(v=!0,l.add(s).addClass("project-open"),function(e){var t=e.index();d.children("li").eq(t).add(e).addClass("selected"),n(".cd-project-title").css("top","calc(15% - 20px)"),r?(o.addClass("slide-out").removeClass("selected"),d.children("li").eq(t).addClass("content-visible"),v=!1):i(o,t,0,!0)}(n(this).parent("li")))}),l.on("click",function(e){e.preventDefault(),0==v&&(v=!0,l.hasClass("project-open")?(l.add(s).removeClass("project-open"),d.find(".selected").removeClass("selected").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n(this).removeClass("content-visible").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),i(a.children("li"),-1,0,!1)}),n(".cd-project-title").css("top","calc(50% - 20px)"),r&&(o.removeClass("slide-out"),d.find(".content-visible").removeClass("content-visible"),v=!1)):l.hasClass("nav-visible")?(l.removeClass("nav-visible"),c.removeClass("nav-clickable nav-visible"),r?o.removeClass("slide-out"):i(a.children("li"),-1,0,!1)):(l.addClass("nav-visible"),c.addClass("nav-visible"),r?o.addClass("slide-out"):i(a.children("li"),-1,0,!0))),r&&(v=!1)}),s.on("click",".scroll",function(){s.animate({scrollTop:n(window).height()},500)}),o.children("a").bgLoaded({afterLoaded:function(){e(o.eq(0))}})}),function(n){n.fn.bgLoaded=function(e){var i=n.extend({},{afterLoaded:function(){this.addClass("bg-loaded")}},e);this.each(function(){var e=n(this),t=e.css("background-image").split(", ");e.data("loaded-count",0),n.each(t,function(s,a){var o=a.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");n("<img/>").attr("src",o).load(function(){n(this).remove(),e.data("loaded-count",e.data("loaded-count")+1),e.data("loaded-count")>=t.length&&i.afterLoaded.call(e)})})})}}(jQuery);