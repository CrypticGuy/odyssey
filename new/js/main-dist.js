!function(t){"use strict";function e(){a({transition:Z,transform:Y}).then(function(){n()}),l(100),function(){var e=function(t,e,n){var r;return function(){var a=this,o=arguments,i=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(a,o)},e),i&&t.apply(a,o)}}(function(){_={width:t.innerWidth,height:t.innerHeight}},10);document.addEventListener("mousemove",function(e){requestAnimationFrame(function(){if(!O)return!1;var n=function(e){var n=0,r=0;e||(e=t.event);return e.pageX||e.pageY?(n=e.pageX,r=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:r}}(e),r=C.rotateX?Y.rotateX-(2*C.rotateX/_.height*n.y-C.rotateX):0,a=C.rotateY?Y.rotateY-(2*C.rotateY/_.width*n.x-C.rotateY):0;o({translateX:Y.translateX,translateY:Y.translateY,translateZ:Y.translateZ,rotateX:r+"deg",rotateY:a+"deg",rotateZ:Y.rotateZ})})}),t.addEventListener("resize",e);f.nav.leftCtrl.addEventListener("click",function(){u("prev")}),f.nav.rightCtrl.addEventListener("click",function(){u("next")}),f.menuCtrl.addEventListener("click",m),f.infoCtrl.addEventListener("click",d)}()}function n(){i(x),O=!0}function r(){O=!1}function a(t){return new Promise(function(e,n){if(v&&!t.stopTransition)return!1;if(v=!0,t.transition&&i(t.transition),t.transform){o(t.transform);T(f.scroller,function(){v=!1,e()})}else e()})}function o(t){f.scroller.style.transform="translate3d("+t.translateX+", "+t.translateY+", "+t.translateZ+") rotate3d(1,0,0,"+t.rotateX+") rotate3d(0,1,0,"+t.rotateY+") rotate3d(0,0,1,"+t.rotateZ+")"}function i(t){f.scroller.style.transition="none"===t?t:"transform "+t.speed+" "+t.easing}function s(t,e){var n=f.slides[g],r=n.querySelector(".slide__name"),a=n.querySelector(".slide__title"),o=n.querySelector(".slide__date");e=void 0!==e?e:0,anime.remove([r,a,o]);var i={targets:[r,a,o],duration:400,delay:function(t,n,r){return e+75+75*n},easing:[.25,.1,.25,1],opacity:{value:"in"===t?[0,1]:[1,0],duration:"in"===t?550:250},translateY:function(e,n){return"in"===t?[150,0]:[0,-150]}};"in"===t?i.begin=function(){n.classList.add("slide--current")}:i.complete=function(){n.classList.remove("slide--current")},anime(i)}function l(t){s("in",t)}function c(t){s("out",t)}function u(t){if(v||y)return!1;y=!0;var e=f.rooms[g];r(),c(),g="next"===t?g<p-1?g+1:0:g>0?g-1:p-1;var s=f.rooms[g];s.style.transform="translate3d("+("next"===t?100:-100)+"%,0,0) translate3d("+("next"===t?1:-1)+"px,0,0)",s.style.opacity=1,a({transition:b,transform:X}).then(function(){return a({transform:{translateX:("next"===t?-100:100)+"%",translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0}})}).then(function(){return s.classList.add("room--current"),e.classList.remove("room--current"),e.style.opacity=0,l(),a({transform:{translateX:("next"===t?-100:100)+"%",translateY:0,translateZ:"500px",rotateX:0,rotateY:0,rotateZ:0}})}).then(function(){i("none"),s.style.transform="translate3d(0,0,0)",o(Y),setTimeout(function(){n()},10),y=!1})}function m(){if(y)return!1;f.menuCtrl.classList.contains("btn--active")?(f.menuCtrl.classList.remove("btn--active"),i(b),l(150),a({transform:Y,stopTransition:!0}).then(function(){n()}),anime.remove(f.menuItems),anime({targets:f.menuItems,duration:250,easing:[.25,.1,.25,1],delay:function(t,e,n){return 40*(n-e-1)},translateY:[0,150],opacity:{value:[1,0],duration:250},complete:function(){f.menuOverlay.classList.remove("overlay--active")}}),anime.remove(f.menuOverlay),anime({targets:f.menuOverlay,duration:400,easing:[.25,.1,.25,1],opacity:[1,0]})):(f.menuCtrl.classList.add("btn--active"),r(),c(),i(q),a({transform:L,stopTransition:!0}),anime.remove(f.menuItems),anime({targets:f.menuItems,duration:500,easing:[.2,1,.3,1],delay:function(t,e){return 250+50*e},translateY:[150,0],opacity:{value:[0,1],duration:200,easing:"linear"},begin:function(){f.menuOverlay.classList.add("overlay--active")}}),anime.remove(f.menuOverlay),anime({targets:f.menuOverlay,duration:1e3,easing:[.25,.1,.25,1],opacity:[0,1]}))}function d(){if(y)return!1;f.infoCtrl.classList.contains("btn--active")?function(){f.infoCtrl.classList.remove("btn--active"),i(b),l(100),a({transform:Y,stopTransition:!0}).then(function(){n()});var t=f.rooms[g].querySelectorAll(".room__img");anime.remove(t),anime({targets:t,duration:400,easing:[.3,1,.3,1],translateY:0,rotateX:0,rotateZ:0,translateZ:10}),anime.remove([f.infoOverlay,f.infoText]);var e={targets:[f.infoOverlay,f.infoText],duration:400,easing:[.25,.1,.25,1],opacity:[1,0],translateY:function(t,e){return e?[0,30]:0},complete:function(){f.infoOverlay.classList.remove("overlay--active")}};anime(e)}():function(){f.infoCtrl.classList.add("btn--active"),r(),c(),i(S),a({transform:h,stopTransition:!0});var t=f.rooms[g].querySelectorAll(".room__img");anime.remove(t),anime({targets:t,duration:function(){return anime.random(15e3,3e4)},easing:[.3,1,.3,1],translateY:function(){return anime.random(-50,50)},rotateX:function(){return anime.random(-2,2)},rotateZ:function(){return anime.random(-5,5)},translateZ:function(){return[10,anime.random(50,_.width/3)]}}),anime.remove([f.infoOverlay,f.infoText]);var e={targets:[f.infoOverlay,f.infoText],duration:1500,delay:function(t,e){return e?150:0},easing:[.25,.1,.25,1],opacity:[0,1],translateY:function(t,e){return e?[30,0]:0},begin:function(){f.infoOverlay.classList.add("overlay--active")}};anime(e)}()}var f={};f.loader=document.querySelector(".overlay--loader"),f.scroller=document.querySelector(".container > .scroller"),f.rooms=[].slice.call(f.scroller.querySelectorAll(".room")),f.content=document.querySelector(".content"),f.nav={leftCtrl:f.content.querySelector("nav > .btn--nav-left"),rightCtrl:f.content.querySelector("nav > .btn--nav-right")},f.slides=[].slice.call(f.content.querySelectorAll(".slides > .slide")),f.menuCtrl=f.content.querySelector(".btn--menu"),f.menuOverlay=f.content.querySelector(".overlay--menu"),f.menuItems=f.menuOverlay.querySelectorAll(".menu > .menu__item"),f.infoCtrl=f.content.querySelector(".btn--info"),f.infoLink=f.content.querySelector(".jou"),f.infoOverlay=f.content.querySelector(".overlay--info"),f.infoText=f.infoOverlay.querySelector(".info");var v,y,g=0,p=f.rooms.length,Y={translateX:0,translateY:0,translateZ:"500px",rotateX:0,rotateY:0,rotateZ:0},X={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0},L={translateX:0,translateY:"150%",translateZ:0,rotateX:"15deg",rotateY:0,rotateZ:0},h=(L={translateX:0,translateY:"50%",translateZ:0,rotateX:"-10deg",rotateY:0,rotateZ:0},{translateX:0,translateY:0,translateZ:"200px",rotateX:"2deg",rotateY:0,rotateZ:"4deg"}),Z={speed:"0.9s",easing:"ease"},b={speed:"0.4s",easing:"ease"},q={speed:"1.5s",easing:"cubic-bezier(0.2,1,0.3,1)"},S={speed:"15s",easing:"cubic-bezier(0.3,1,0.3,1)"},x={speed:"0.2s",easing:"ease-out"},O=!1,C={rotateX:1,rotateY:-3},T=function(t,e){var n=function(t){this.removeEventListener("transitionend",n),e&&"function"==typeof e&&e.call()};t.addEventListener("transitionend",n)},_={width:t.innerWidth,height:t.innerHeight};imagesLoaded(f.scroller,function(){anime({targets:f.loader,duration:600,easing:"easeInOutCubic",delay:500,translateY:"-100%",begin:function(){e()},complete:function(){f.loader.classList.remove("overlay--active")}})})}(window);